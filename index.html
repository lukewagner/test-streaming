<!doctype html>
<html>
<head><meta charset="utf8"></head>
<body>
  <button onclick="compile('small.wasm')">Compile Small</button>
  <button onclick="compile('big.wasm')">Compile Big</button>
  <button onclick="printBytes('small.wasm')">Print Small</button>
  <button onclick="printBytes('big.wasm')">Print Big</button>
  <div id="out"></div>
  <script>
    const out = document.getElementById('out');
    function println(str) {
      out.innerHTML += str + '<' + "br" + '>';
    }

    function compile(file) {
      WebAssembly.compileStreaming(fetch(file))
      .then(module => println("compile success"))
      .catch(err => println("error! " + String(err)));
    }

    function printBytes(file) {
      fetch(file)
      .then(response => response.arrayBuffer())
      .then(buffer => println("First 20 bytes: " + new Uint8Array(buffer, 0, 20).join(',')))
      .catch(err => println("error! " + String(err)));
    }
  </script>
</body>
</html>
